{% extends 'base.html' %}
{% load staticfiles %}
{% load custom_tags %}
{% block additional_static_files %}
    <script src="{% static 'js/map.js' %}"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDCrs2JD-1ER45w0o6JILgo-wmnMWm_lj4&callback=initMap"
            async defer></script>
    <script src="https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyDevOz4ccaGWa0v8-0ALkxADKIHca2cLnA"></script>
    <script src="{% static 'js/userMarker.js' %}"></script>
    <script>
        {% for region_name, info in regions_info.items %}
            let {{ region_name|lower }} = {{ info|get_item:'coords'|safe }}
            let {{ region_name|lower }}Polygon = new google.maps.Polygon({
                paths: {{ region_name|lower }},
                strokeColor: '{{ info|get_item:'hex_color'|safe }}',
                strokeOpacity: 0.8,
                strokeWeight: 3,
                fillColor: '{{ info|get_item:'hex_color'|safe }}',
                fillOpacity: 0.35
            })
            {{ region_name|lower }}Polygon.setMap(map)
        {% endfor %}
    </script>
    <script type="text/javascript">
        $(document).ready(function() {
            $(".create-marker").modalForm({
                formURL: "{% url 'create-marker' %}"
            });
        });
    </script>
{% endblock %}

{% block content %}
    <div id="map"></div>
    <button class="create-marker btn btn-primary" type="button" name="button">Create Marker</button>

    <div class="modal fade" tabindex="-1" role="dialog" id="modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

            </div>
        </div>
    </div>
{% endblock %}

